(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],Array(24).concat([function(e,t,n){},function(e,t,n){},,function(e,t,n){},,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(14),r=n.n(a),i=(n(24),n(3)),o=(n(25),n(2)),l=n.n(o),u=n(4),j="https://fierce-plains-42807.herokuapp.com",b=n(7),d=(n(27),n(0)),m=function(e){var t=e.setHasCookie,n=Object(c.useState)(""),s=Object(i.a)(n,2),a=s[0],r=s[1],o=Object(c.useState)(""),m=Object(i.a)(o,2),p=m[0],O=m[1],h=Object(c.useState)(!1),x=Object(i.a)(h,2),f=x[0],v=x[1],g=Object(c.useState)(!1),N=Object(i.a)(g,2),_=N[0],w=N[1],k=function(){var e=Object(u.a)(l.a.mark((function e(n){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,fetch("".concat(j,"/login"),{body:JSON.stringify({username:a}),method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});case 3:if(c=e.sent,r(""),O(""),204===c.status&&(v(!0),t(!0)),401!==c.status){e.next=10;break}return w(!0),e.abrupt("return");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return f?Object(d.jsx)(b.a,{to:"/"}):Object(d.jsx)("article",{className:"form-container-login",children:Object(d.jsxs)("div",{className:"login-header-div",children:[Object(d.jsxs)("h2",{className:"login-header__intro",children:["Welcome to ",Object(d.jsx)("strong",{children:"Chameleon"}),"!"]}),Object(d.jsx)("p",{className:"semibold login-header__p",children:"The place where you can share your wardrobe with fashion-lovers in your area!"}),Object(d.jsx)("br",{}),Object(d.jsx)("p",{className:"login-header__p",children:"Start letting your clothes pay for themselves and help the environment at the same time!"}),Object(d.jsx)("br",{}),Object(d.jsx)("p",{className:"login-header__p login-header__p--btm",children:"Log in to Chameleon to start listing items to rent out or to start browsing for outfits in your area."}),Object(d.jsx)("h3",{className:"subheader-login",children:"Have an account? Log in below"}),Object(d.jsxs)("form",{className:"form-login",onSubmit:k,children:[Object(d.jsxs)("label",{className:"semibold",children:[Object(d.jsx)("input",{className:"input-field",type:"text",name:"username",placeholder:"Username",value:a,onChange:function(e){return r(e.target.value)},required:!0}),Object(d.jsx)("br",{})]}),Object(d.jsxs)("label",{className:"semibold",children:[Object(d.jsx)("input",{className:"input-field",type:"password",name:"password",placeholder:"Password",value:p,onChange:function(e){return O(e.target.value)},required:!0}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{})]}),Object(d.jsx)("button",{className:"btn-login semibold",type:"submit",children:"Login"}),Object(d.jsx)("button",{className:"btn-create-account semibold",children:" Create account "})]}),_&&Object(d.jsx)("h3",{children:"Please enter a valid username"})]})})},p=n(6),O=(n(37),function(e){var t=e.listing,n=Object(c.useState)(null),s=Object(i.a)(n,2),a=s[0],r=s[1],o=Object(c.useState)(!1),b=Object(i.a)(o,2),m=b[0],O=b[1],h=Object(c.useState)([]),x=Object(i.a)(h,2),f=x[0],v=x[1],g=function(){var e=Object(u.a)(l.a.mark((function e(){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/users/").concat(t.ownerId));case 2:return n=e.sent,e.next=5,n.json();case 5:c=e.sent,r(c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(l.a.mark((function e(){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/bookings/").concat(t._id));case 2:return n=e.sent,e.next=5,n.json();case 5:c=e.sent,v(c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){g(),N()}),[]),a?Object(d.jsxs)("article",{className:"listing",children:[Object(d.jsx)("img",{className:"listing__img",src:"".concat(j,"/uploads/").concat(t.pictures[0]),alt:t.title}),Object(d.jsxs)("div",{className:"listing__txt",children:[Object(d.jsx)("h3",{className:"margin-btm",children:t.title}),Object(d.jsxs)("p",{className:"margin-btm semibold",children:["Rented out by ",Object(d.jsx)(p.b,{to:"/user/".concat(a.user._id),children:a.user.firstName})," (",a.rating,"No ratings yet"!==a.rating&&Object(d.jsx)("span",{class:"orange-star material-icons-round",children:"star_rate"}),")"]}),Object(d.jsxs)("p",{className:"margin-btm",children:["Category: ","".concat(t.attributes.category.charAt(0).toUpperCase()+t.attributes.category.slice(1)),", Size: ","".concat(t.attributes.size.charAt(0).toUpperCase()+t.attributes.size.slice(1))]}),Object(d.jsxs)("p",{className:"margin-btm",children:[t.attributes.price," SEK per day"]}),Object(d.jsxs)("div",{className:"listing__btns",children:[Object(d.jsx)("button",{className:"listing__btn listing__btn--more semibold",onClick:function(){return O(!m)},children:"Read more"}),Object(d.jsx)(p.b,{to:"/booking/".concat(t._id),children:Object(d.jsx)("button",{className:"listing__btn listing__btn--request semibold",children:"Request to rent"})})]})]}),m&&Object(d.jsxs)("div",{className:"listing__txt--description",children:[Object(d.jsx)("p",{className:"margin-btm",children:t.description}),0!==f.length&&Object(d.jsx)("p",{className:"margin-btm",children:"This item has been booked on the following dates:"}),f.map((function(e){return Object(d.jsxs)("p",{className:"semibold",children:[e.bookingFrom," to ",e.bookingTo]})}))]})]}):null}),h=(n(38),function(e){var t=e.changeFilter,n=e.resetFilters;return Object(d.jsxs)("article",{className:"filter",children:[Object(d.jsxs)("div",{className:"filter__dropdowns",children:[Object(d.jsx)("div",{className:"filter__dropdown",children:Object(d.jsxs)("label",{className:"filter-label",children:["Gender",Object(d.jsxs)("select",{className:"filter__dropdown--gender",name:"gender",id:"gender",onChange:function(e){return t("gender",e.target.value)},children:[Object(d.jsx)("option",{value:"all",children:"All"}),Object(d.jsx)("option",{value:"guys",children:"Guys"}),Object(d.jsx)("option",{value:"ladies",children:"Ladies"}),Object(d.jsx)("option",{value:"unisex",children:"Unisex"})]})]})}),Object(d.jsx)("div",{className:"filter__dropdown",children:Object(d.jsxs)("label",{className:"filter-label",children:["Category",Object(d.jsxs)("select",{className:"filter__dropdown--category",name:"category",id:"category",onChange:function(e){return t("category",e.target.value)},children:[Object(d.jsx)("option",{value:"all",children:"All"}),Object(d.jsx)("option",{value:"trousers",children:"Trousers"}),Object(d.jsx)("option",{value:"jeans",children:"Jeans"}),Object(d.jsx)("option",{value:"shirt",children:"Shirt"}),Object(d.jsx)("option",{value:"dress",children:"Dress"}),Object(d.jsx)("option",{value:"skirt",children:"Skirt"}),Object(d.jsx)("option",{value:"jacket",children:"Jacket"}),Object(d.jsx)("option",{value:"suit",children:"Suit"}),Object(d.jsx)("option",{value:"accessories",children:"Accessories"})]})]})}),Object(d.jsx)("div",{className:"filter__dropdown",children:Object(d.jsxs)("label",{className:"filter-label",children:["Size",Object(d.jsxs)("select",{className:"filter__dropdown--size",name:"size",id:"size",onChange:function(e){return t("size",e.target.value)},children:[Object(d.jsx)("option",{value:"all",children:"All"}),Object(d.jsx)("option",{value:"xsmall",children:"XS"}),Object(d.jsx)("option",{value:"small",children:"S"}),Object(d.jsx)("option",{value:"medium",children:"M"}),Object(d.jsx)("option",{value:"large",children:"L"}),Object(d.jsx)("option",{value:"xlarge",children:"XL"})]})]})})]}),Object(d.jsx)("button",{className:"filter-reset-btn",onClick:function(){n(),document.getElementById("gender").selectedIndex=0,document.getElementById("category").selectedIndex=0,document.getElementById("size").selectedIndex=0},children:"Reset"})]})}),x=(n(39),function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)([]),r=Object(i.a)(a,2),o=r[0],b=r[1],m=Object(c.useState)([]),p=Object(i.a)(m,2),x=p[0],f=p[1],v=Object(c.useState)(!1),g=Object(i.a)(v,2),N=g[0],_=g[1],w=Object(c.useState)([]),k=Object(i.a)(w,2),y=(k[0],k[1],function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=document.cookie.split("=")[1],e.next=4,fetch("".concat(j,"/listings"));case 4:return n=e.sent,e.next=7,n.json();case 7:c=e.sent,a=c.filter((function(e){return e.ownerId!==t})),s(a.reverse()),b(a),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}());return Object(c.useEffect)((function(){var e=n.filter((function(e){return x.every((function(t){return t.filterValue===e.attributes[t.filterName]}))}));b(e)}),[x]),Object(c.useEffect)((function(){y()}),[]),Object(d.jsxs)("div",{className:"filter",children:[Object(d.jsx)("div",{className:"filter__btn-div",children:Object(d.jsxs)("button",{className:"filter__btn",onClick:function(){return _(!N)},children:["Filter",Object(d.jsx)("span",{className:"material-icons-round",children:"filter_list"})]})}),N&&Object(d.jsx)(h,{changeFilter:function(e,t){var n=x.filter((function(t){return t.filterName!==e}));"all"!==t&&(console.log(n),n.push({filterName:e,filterValue:t})),f(n)},resetFilters:function(){return f([])}}),Object(d.jsx)("div",{className:"listing",children:o.map((function(e){return Object(d.jsx)(O,{listing:e},e._id)}))})]})}),f=function(){return Object(d.jsx)("div",{children:Object(d.jsx)(x,{})})},v=(n(40),function(){var e=document.cookie.split("=")[1],t=Object(b.g)(),n=function(){var e=Object(u.a)(l.a.mark((function e(n){var c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),c=document.getElementById("listingForm"),s=new FormData(c),e.next=5,fetch("".concat(j,"/listings"),{method:"POST",body:s});case 5:t.push("/deals");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("article",{className:"form-container",children:[Object(d.jsx)("button",{onClick:function(){t.go(-1)},className:"btn-close",children:Object(d.jsx)("span",{className:"material-icons-round close-icon",children:"close"})}),Object(d.jsx)("h2",{className:"header-create-listing",children:"List a new item"}),Object(d.jsxs)("form",{className:"form-create-listing",onSubmit:n,id:"listingForm",name:"listingForm",encType:"multipart/form-data",children:[Object(d.jsx)("input",{type:"hidden",value:e,name:"ownerId"}),Object(d.jsxs)("label",{className:"semibold",children:["Listing title (required)",Object(d.jsx)("br",{}),Object(d.jsx)("input",{className:"input-field",type:"text",name:"title",placeholder:"The title for your listing",required:!0}),Object(d.jsx)("br",{})]}),Object(d.jsxs)("label",{className:"semibold",children:["Item description (required)",Object(d.jsx)("br",{}),Object(d.jsx)("input",{className:"input-field",type:"text",name:"description",placeholder:"Describe the item in a few words",required:!0}),Object(d.jsx)("br",{})]}),Object(d.jsxs)("label",{className:"semibold",children:["Price per day (required)",Object(d.jsx)("br",{}),Object(d.jsx)("input",{className:"input-field",type:"number",name:"price",min:"1",max:"10000",placeholder:"Price per day in SEK",required:!0}),Object(d.jsx)("br",{})]}),Object(d.jsxs)("label",{className:"semibold",children:["Category",Object(d.jsx)("br",{}),Object(d.jsxs)("select",{className:"input-field input-select",name:"category",children:[Object(d.jsx)("option",{value:"guys",children:"Select an option"}),Object(d.jsx)("option",{value:"trousers",children:"Trousers"}),Object(d.jsx)("option",{value:"jeans",children:"Jeans"}),Object(d.jsx)("option",{value:"shirt",children:"Shirt"}),Object(d.jsx)("option",{value:"dress",children:"Dress"}),Object(d.jsx)("option",{value:"skirt",children:"Skirt"}),Object(d.jsx)("option",{value:"jacket",children:"Jacket"}),Object(d.jsx)("option",{value:"suit",children:"Suit"}),Object(d.jsx)("option",{value:"accessories",children:"Accessories"})]}),Object(d.jsx)("br",{})]}),Object(d.jsxs)("label",{className:"semibold",children:["Color",Object(d.jsx)("br",{}),Object(d.jsxs)("select",{className:"input-field input-select",name:"color",children:[Object(d.jsx)("option",{value:"guys",children:"Select an option"}),Object(d.jsx)("option",{value:"black",children:"Black"}),Object(d.jsx)("option",{value:"white",children:"White"}),Object(d.jsx)("option",{value:"red",children:"Red"}),Object(d.jsx)("option",{value:"blue",children:"Blue"}),Object(d.jsx)("option",{value:"orange",children:"Orange"}),Object(d.jsx)("option",{value:"green",children:"Green"}),Object(d.jsx)("option",{value:"pink",children:"Pink"}),Object(d.jsx)("option",{value:"purple",children:"Purple"}),Object(d.jsx)("option",{value:"grey",children:"Grey"}),Object(d.jsx)("option",{value:"brown",children:"Brown"}),Object(d.jsx)("option",{value:"mixed",children:"Mixed"}),Object(d.jsx)("option",{value:"yellow",children:"Yellow"})]}),Object(d.jsx)("br",{})]}),Object(d.jsxs)("label",{className:"semibold",children:["Size",Object(d.jsx)("br",{}),Object(d.jsxs)("select",{className:"input-field input-select",name:"size",children:[Object(d.jsx)("option",{value:"guys",children:"Select an option"}),Object(d.jsx)("option",{value:"xsmall",children:"XS"}),Object(d.jsx)("option",{value:"small",children:"S"}),Object(d.jsx)("option",{value:"medium",children:"M"}),Object(d.jsx)("option",{value:"large",children:"L"}),Object(d.jsx)("option",{value:"xlarge",children:"XL"})]}),Object(d.jsx)("br",{})]}),Object(d.jsxs)("label",{className:"semibold",children:["Gender",Object(d.jsx)("br",{}),Object(d.jsxs)("select",{className:"input-field input-select",name:"gender",children:[Object(d.jsx)("option",{value:"guys",children:"Select an option"}),Object(d.jsx)("option",{value:"guys",children:"Guys"}),Object(d.jsx)("option",{value:"ladies",children:"Ladies"}),Object(d.jsx)("option",{value:"unisex",children:"Unisex"})]}),Object(d.jsx)("br",{})]}),Object(d.jsxs)("div",{className:"form-create-listing__preview",children:[Object(d.jsx)("img",{id:"preview"}),Object(d.jsx)("p",{children:"No image"})]}),Object(d.jsxs)("label",{className:"semibold input-img",children:["Upload image ",Object(d.jsx)("span",{className:"material-icons-round icon-file-upload",children:"file_upload"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"file",name:"image",accept:"image/x-png,image/gif,image/jpeg",onChange:function(e){return function(e){var t=document.getElementById("preview");t.src=URL.createObjectURL(e.target.files[0]),t.onload=function(){return URL.revokeObjectURL(t.src)}}(e)},required:!0})]}),Object(d.jsx)("button",{className:"btn-submit semibold",type:"submit",children:"Add post"})]})]})}),g=function(){return Object(d.jsx)("div",{children:Object(d.jsx)(v,{})})},N=(n(41),function(e){var t=e.listingId,n=e.ownerId,c=document.cookie.split("=")[1],s=Object(b.g)(),a=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=document.getElementById("bookingForm"),c=new FormData(n),e.next=5,fetch("".concat(j,"/bookings"),{method:"POST",body:c});case 5:s.push("/deals/ongoing");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("article",{className:"form-container",children:[Object(d.jsx)("button",{onClick:function(){s.go(-1)},className:"btn-close",children:Object(d.jsx)("span",{className:"material-icons-round close-icon",children:"close"})}),Object(d.jsx)("h2",{className:"header",children:"Request to book"}),Object(d.jsxs)("form",{className:"form-book",name:"bookingForm",id:"bookingForm",onSubmit:a,children:[Object(d.jsxs)("label",{className:"semibold",children:["From",Object(d.jsx)("br",{}),Object(d.jsx)("input",{className:"input-date",type:"date",name:"bookingFrom",required:!0}),Object(d.jsx)("br",{})]}),Object(d.jsxs)("label",{className:"semibold",children:["To",Object(d.jsx)("br",{}),Object(d.jsx)("input",{className:"input-date",type:"date",name:"bookingTo",required:!0}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{})]}),Object(d.jsx)("input",{type:"hidden",value:t,name:"listingId"}),Object(d.jsx)("input",{type:"hidden",value:n,name:"ownerId"}),Object(d.jsx)("input",{type:"hidden",value:c,name:"renterId"}),Object(d.jsx)("button",{className:"btn-submit semibold",type:"submit",children:"Send Request"})]})]})}),_=function(e){var t=e.match,n=Object(c.useState)(""),s=Object(i.a)(n,2),a=s[0],r=s[1],o=function(){var e=Object(u.a)(l.a.mark((function e(){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/listings/").concat(t.params.listingId));case 2:return n=e.sent,e.next=5,n.json();case 5:c=e.sent,r(c.ownerId);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){o()}),[]),Object(d.jsx)("div",{children:Object(d.jsx)(N,{listingId:t.params.listingId,ownerId:a})})},w=n(5),k=(n(42),n(43),function(e){var t=e.children,n=e.open,c=e.onClose;return n?r.a.createPortal(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"overlay"}),Object(d.jsxs)("div",{className:"modal",children:[Object(d.jsx)("button",{onClick:c,className:"btn-close",children:Object(d.jsx)("span",{className:"material-icons-round close-icon",children:"close"})}),t]})]}),document.getElementById("portal")):null}),y=function(e){var t=e.listing,n=Object(c.useState)([]),s=Object(i.a)(n,2),a=s[0],r=s[1],o=Object(c.useState)([]),m=Object(i.a)(o,2),O=m[0],h=m[1],x=Object(c.useState)(!1),f=Object(i.a)(x,2),v=f[0],g=f[1],N=Object(c.useState)(null),_=Object(i.a)(N,2),y=_[0],S=_[1],I=Object(c.useState)([]),C=Object(i.a)(I,2),E=C[0],L=C[1],R=Object(c.useState)(!1),F=Object(i.a)(R,2),q=F[0],D=F[1],T=Object(b.g)(),B=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/listings/").concat(t._id),{method:"delete"});case 2:T.push("/deals");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(u.a)(l.a.mark((function e(){var n,c,s,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/bookings/").concat(t._id));case 2:return n=e.sent,e.next=5,n.json();case 5:c=e.sent,s=c.filter((function(e){return e.accepted&&!e.completed})),a=c.filter((function(e){return!e.accepted})),r(s),h(a);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==O.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("".concat(j,"/users/").concat(O[0].renterId));case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,console.log(n),S(n);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(a.map((function(e){return fetch("".concat(j,"/users/").concat(e.renterId)).then((function(e){return e.json()}))})));case 2:t=e.sent,L(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){P()}),[]),Object(c.useEffect)((function(){U()}),[O]),Object(c.useEffect)((function(){z()}),[a]);var A=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(w.a)(Object(w.a)({},O[0]),{},{accepted:!0}),e.next=3,fetch("".concat(j,"/bookings/").concat(O[0]._id),{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 3:g(!1),T.go(0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/bookings/").concat(O[0]._id),{method:"DELETE"});case 2:g(!1),T.go(0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/bookings/completed/").concat(t),{method:"PUT"});case 2:T.push("/deals/completed");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("article",{className:"active-listing ".concat(0!==O.length&&"active-listing--pending"),children:[Object(d.jsx)("div",{className:"active-listing__img-div",children:Object(d.jsx)("img",{className:"active-listing__img",src:"".concat(j,"/uploads/").concat(t.pictures[0]),alt:t.title})}),Object(d.jsxs)("div",{className:"active-listing__txt-div",children:[Object(d.jsx)("h3",{className:"active-listing__listing-title",children:t.title}),Object(d.jsx)("p",{className:"active-listing__listing-description",children:t.description}),Object(d.jsxs)("p",{className:"active-listing__listing-price semibold",children:[t.attributes.price," SEK per day"]}),Object(d.jsxs)("div",{className:"active-listing__btn-div",children:[Object(d.jsx)(p.b,{to:"/updatelisting/".concat(t._id),children:Object(d.jsxs)("p",{className:"semibold active-listing__btn active-listing__btn--update-btn",children:["Update",Object(d.jsx)("span",{className:"material-icons-round",children:"edit"})]})}),Object(d.jsxs)("p",{className:"semibold active-listing__btn active-listing__btn--delete-btn",onClick:B,children:["Delete",Object(d.jsx)("span",{class:"material-icons-round",children:"delete"})]})]}),Object(d.jsxs)("div",{children:[a.length>0&&Object(d.jsx)("button",{className:"active-listing__btn active-listing__btn--dates-btn",onClick:function(){return D(!0)},children:"View pre-booked dates"}),0!==O.length&&Object(d.jsx)("button",{className:"active-listing__request-btn",onClick:function(){return g(!0)},children:"Review pending request"})]})]})]}),null!==y&&Object(d.jsx)(k,{open:v,onClose:function(){return g(!1)},children:Object(d.jsxs)("article",{className:"request-review",children:[Object(d.jsxs)("div",{className:"flex",children:[Object(d.jsx)("div",{className:"request-review__img",children:Object(d.jsx)("img",{src:"".concat(j).concat(y.user.picture),className:"img-user"})}),Object(d.jsx)("div",{className:"flex-column",children:Object(d.jsxs)("div",{className:"request-review__txt",children:[Object(d.jsx)(p.b,{to:"/user/".concat(y.user._id),children:Object(d.jsx)("h2",{children:y.user.firstName})}),Object(d.jsxs)("h3",{children:["Rating: ",y.rating,Object(d.jsx)("span",{class:"orange-star material-icons-round",children:"star_rate"})]}),Object(d.jsx)("p",{children:O[0].bookingFrom}),Object(d.jsx)("p",{children:O[0].bookingTo}),Object(d.jsx)("br",{})]})})]}),Object(d.jsxs)("div",{className:"btn-container",children:[Object(d.jsx)("button",{className:"btn-approve",onClick:A,children:"Approve"}),Object(d.jsx)("button",{className:"btn-reject",onClick:H,children:"Reject"})]})]})}),Object(d.jsx)(k,{open:q,onClose:function(){return D(!1)},children:Object(d.jsx)("ul",{className:"active-listing__acceptedbookings-ul",children:a.map((function(e,t){return Object(d.jsx)("li",{className:"active-listing__acceptedbooking-li prebook-container",children:0!==E.length&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"flex",children:[Object(d.jsx)("div",{className:"prebooked__img",children:Object(d.jsx)("img",{src:"".concat(j).concat(E[t].user.picture),className:"img-user"})}),Object(d.jsxs)("div",{className:"flex-column return-txt-container",children:[Object(d.jsx)("h2",{className:"active-listing__acceptedbooking-p",children:Object(d.jsx)(p.b,{to:"/user/".concat(e.renterId),children:E[t].user.firstName})}),Object(d.jsxs)("p",{className:"active-listing__acceptedbooking-p",children:["Rented from:",Object(d.jsx)("br",{}),Object(d.jsx)("i",{children:e.bookingFrom})]}),Object(d.jsxs)("p",{className:"active-listing__acceptedbooking-p",children:["Rented to: ",Object(d.jsx)("br",{}),Object(d.jsx)("i",{children:e.bookingTo})]})]})]}),Object(d.jsx)("div",{className:"btn-container-return",children:Object(d.jsx)("button",{className:"active-listing__return-btn",onClick:function(){return J(e._id)},children:"Mark as returned"})})]})},e._id)}))})})]})},S=(n(44),function(){var e=document.cookie.split("=")[1],t=Object(c.useState)([]),n=Object(i.a)(t,2),s=n[0],a=n[1],r=function(){var t=Object(u.a)(l.a.mark((function t(){var n,c,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(j,"/listings/active/").concat(e));case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,s=c.reverse(),a(s);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){r()}),[]),Object(d.jsxs)("section",{className:"active-lisitings-container",children:[Object(d.jsx)("h3",{className:"active-listings__subheading",children:"Your live listings on Chameleon"}),s.map((function(e){return Object(d.jsx)(y,{listing:e},e._id)})),0===s.length&&Object(d.jsx)("p",{className:"nothing-to-show",children:"You have no active listings on Chameleon yet."})]})}),I=(n(45),function(e){var t=e.rental,n=Object(c.useState)(null),s=Object(i.a)(n,2),a=s[0],r=s[1],o=Object(c.useState)(null),b=Object(i.a)(o,2),m=b[0],O=b[1],h=Object(c.useState)(!1),x=Object(i.a)(h,2),f=x[0],v=x[1],g=function(){var e=Object(u.a)(l.a.mark((function e(){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/listings/").concat(t.listingId));case 2:return n=e.sent,e.next=5,n.json();case 5:c=e.sent,r(c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("".concat(j,"/users/").concat(a.ownerId));case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,O(n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){g()}),[]),Object(c.useEffect)((function(){N()}),[a]),a&&m?Object(d.jsxs)("article",{className:"rental",children:[Object(d.jsx)("img",{className:"rental__img",src:"".concat(j,"/uploads/").concat(a.pictures[0])}),Object(d.jsxs)("div",{className:"rental__txt",children:[Object(d.jsx)("h3",{className:"rental__heading",children:a.title}),t.accepted&&Object(d.jsx)("p",{className:"semibold rental__status",children:"Request Approved"}),!t.accepted&&Object(d.jsx)("p",{className:"semibold rental__status",children:"Request Pending"}),Object(d.jsxs)("p",{className:"rental__owner",children:["Rented from: ",Object(d.jsx)(p.b,{to:"/user/".concat(m.user._id),children:m.user.firstName})]}),t.accepted&&Object(d.jsxs)("button",{className:"rental__contact-btn",onClick:function(){return v(!0)},children:["Contact ",m.user.firstName]}),Object(d.jsxs)("p",{className:"rental__date",children:["Rental start: ",t.bookingFrom]}),Object(d.jsxs)("p",{className:"rental__date rental__date--end",children:["Rental end: ",t.bookingTo]})]}),Object(d.jsx)(k,{open:f,onClose:function(){return v(!1)},children:Object(d.jsxs)("article",{className:"user-modal",children:[Object(d.jsxs)("h3",{children:[m.user.firstName," ",m.user.lastName]}),Object(d.jsxs)("p",{children:[m.user.location.postalcode,", ",m.user.location.area]}),Object(d.jsx)("p",{children:m.user.email})]})})]}):null}),C=(n(46),function(){var e=document.cookie.split("=")[1],t=Object(c.useState)([]),n=Object(i.a)(t,2),s=n[0],a=n[1],r=function(){var t=Object(u.a)(l.a.mark((function t(){var n,c,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(j,"/bookings/rentals/").concat(e));case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,s=c.filter((function(e){return!1===e.completed})),a(s.reverse());case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){r()}),[]),Object(d.jsxs)("section",{className:"live-deals-container",children:[Object(d.jsx)("h3",{className:"live-deals__subheading",children:"Items you are renting"}),s.map((function(e){return Object(d.jsx)(I,{rental:e},e._id)})),0===s.length&&Object(d.jsx)("p",{className:"nothing-to-show",children:"You have no booked items at the moment."})]})}),E=(n(47),n(48),function(e){var t=e.dealPartner,n=e.booking,s=e.setModal,a=Object(b.g)(),r=document.cookie.split("=")[1],o=Object(c.useState)({rating:"",feedback:""}),m=Object(i.a)(o,2),p=m[0],O=m[1],h=function(){var e=Object(u.a)(l.a.mark((function e(c){var i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),i=Object(w.a)(Object(w.a)({},p),{},{targetId:t.user._id,authorId:r,bookingId:n._id,date:(new Date).toISOString().split("T")[0]}),e.next=4,fetch("".concat(j,"/reviews"),{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}});case 4:O({rating:"",feedback:""}),s(!1),a.go(0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"review-modal",children:[Object(d.jsxs)("h2",{className:"review-modal__heading",children:["Review ",t.user.firstName]}),Object(d.jsxs)("form",{className:"review-modal__form",onSubmit:h,id:"review-form",children:[Object(d.jsxs)("div",{className:"review-modal__input-div",onChange:function(e){return O(Object(w.a)(Object(w.a)({},p),{},{rating:e.target.value}))},children:[Object(d.jsxs)("label",{className:"review-modal__label",children:[Object(d.jsx)("input",{className:"review-modal__input",type:"radio",value:"1",name:"rating",required:!0}),"1"]}),Object(d.jsxs)("label",{className:"review-modal__label",children:[Object(d.jsx)("input",{className:"review-modal__input",type:"radio",value:"2",name:"rating"}),"2"]}),Object(d.jsxs)("label",{className:"review-modal__label",children:[Object(d.jsx)("input",{className:"review-modal__input",type:"radio",value:"3",name:"rating"}),"3"]}),Object(d.jsxs)("label",{className:"review-modal__label",children:[Object(d.jsx)("input",{className:"review-modal__input",type:"radio",value:"4",name:"rating"}),"4"]}),Object(d.jsxs)("label",{className:"review-modal__label",children:[Object(d.jsx)("input",{className:"review-modal__input",type:"radio",value:"5",name:"rating"}),"5"]})]}),Object(d.jsx)("textarea",{className:"review-modal__textarea",form:"review-form",name:"feedback",value:p.feedback,onChange:function(e){return O(Object(w.a)(Object(w.a)({},p),{},{feedback:e.target.value}))},placeholder:"Write about your experience with ".concat(t.user.firstName)}),Object(d.jsx)("button",{className:"review-modal__btn",type:"submit",children:"Leave review"})]})]})}),L=function(e){var t=e.booking,n=document.cookie.split("=")[1],s=Object(c.useState)(null),a=Object(i.a)(s,2),r=a[0],o=a[1],b=Object(c.useState)(null),m=Object(i.a)(b,2),O=m[0],h=m[1],x=Object(c.useState)(!1),f=Object(i.a)(x,2),v=f[0],g=f[1],N=Object(c.useState)([]),_=Object(i.a)(N,2),w=_[0],y=_[1],S=Object(c.useState)(!1),I=Object(i.a)(S,2),C=I[0],L=I[1],R=function(){var e=Object(u.a)(l.a.mark((function e(){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/listings/").concat(t.listingId));case 2:return n=e.sent,e.next=5,n.json();case 5:c=e.sent,o(c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(u.a)(l.a.mark((function e(){var c,s,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/reviews/booking/").concat(t._id));case 2:return c=e.sent,e.next=5,c.json();case 5:s=e.sent,a=s.filter((function(e){return e.authorId===n})),y(a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(u.a)(l.a.mark((function e(){var c,s,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n!==t.ownerId){e.next=10;break}return e.next=3,fetch("".concat(j,"/users/").concat(t.renterId));case 3:return c=e.sent,e.next=6,c.json();case 6:s=e.sent,h(s),e.next=17;break;case 10:return e.next=12,fetch("".concat(j,"/users/").concat(t.ownerId));case 12:return a=e.sent,e.next=15,a.json();case 15:r=e.sent,h(r);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){R(),q()}),[]),Object(c.useEffect)((function(){O&&F()}),[O]),r&&O?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("article",{className:"completed ".concat(n===r.ownerId&&!1===t.renterHasBeenReviewed||n!==r.ownerId&&!1===t.ownerHasBeenReviewed?"completed--pending":""),children:[Object(d.jsx)("img",{className:"completed__img",src:"".concat(j,"/uploads/").concat(r.pictures[0])}),Object(d.jsxs)("div",{className:"completed__txt",children:[Object(d.jsx)("h3",{className:"completed__title",children:r.title}),n===r.ownerId&&Object(d.jsxs)("p",{className:"completed__p",children:["You rented this item to ",Object(d.jsx)(p.b,{to:"/user/".concat(O.user._id),children:O.user.firstName})]}),n===r.ownerId&&!1===t.renterHasBeenReviewed&&Object(d.jsxs)("button",{className:"completed__review-btn",onClick:function(){return g(!0)},children:["Leave ",O.user.firstName," a review"]}),n!==r.ownerId&&Object(d.jsxs)("p",{className:"completed__p",children:["You rented this item from ",Object(d.jsx)(p.b,{to:"/user/".concat(O.user._id),children:O.user.firstName})]}),n!==r.ownerId&&!1===t.ownerHasBeenReviewed&&Object(d.jsxs)("button",{className:"completed__review-btn",onClick:function(){return g(!0)},children:["Leave ",O.user.firstName," a review"]}),0!==w.length&&Object(d.jsxs)("div",{children:[Object(d.jsxs)("p",{className:"completed__review-stars",children:["You rated ",w[0].rating," stars on ",w[0].date]}),""!==w[0].feedback&&Object(d.jsxs)("p",{onClick:function(){return L(!C)},className:"".concat(C?"review-open":"review-close"),children:['"',w[0].feedback,'"']})]})]})]}),Object(d.jsx)(k,{open:v,onClose:function(){return g(!1)},children:Object(d.jsx)(E,{booking:t,dealPartner:O,setModal:g})})]}):null},R=(n(49),function(){var e=document.cookie.split("=")[1],t=Object(c.useState)([]),n=Object(i.a)(t,2),s=n[0],a=n[1],r=function(){var t=Object(u.a)(l.a.mark((function t(){var n,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(j,"/bookings/completed/").concat(e));case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,a(c);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){r()}),[]),Object(d.jsxs)("section",{className:"completed-listings-container",children:[Object(d.jsx)("h3",{className:"completed__heading",children:"Your completed deals"}),s.map((function(e){return Object(d.jsx)(L,{booking:e},e._id)}))]})}),F=(n(50),function(){var e=Object(b.h)(),t=e.path,n=e.url,s=Object(c.useState)([]),a=Object(i.a)(s,2),r=a[0],o=a[1],m=Object(c.useState)([]),O=Object(i.a)(m,2),h=O[0],x=O[1],f=document.cookie.split("=")[1],v=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/bookings/owner/").concat(f)).then((function(e){return e.json()}));case 2:t=e.sent,n=t.filter((function(e){return!e.accepted})),o(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/bookings/completed/").concat(f)).then((function(e){return e.json()}));case 2:t=e.sent,n=t.filter((function(e){return f===e.ownerId&&!e.renterHasBeenReviewed||(f===e.renterId&&!e.ownerHasBeenReviewed||void 0)})),x(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){v(),g()}),[]),Object(d.jsxs)("div",{className:"active-deals",children:[Object(d.jsx)("h2",{className:"active-deals__header",children:"Deals"}),Object(d.jsxs)("div",{className:"active-deals__tabs",children:[Object(d.jsxs)("p",{children:[Object(d.jsx)(p.c,{to:"".concat(n),exact:!0,className:"link-deals",activeStyle:{background:"black",color:"white",textDecoration:"none"},children:"Your Listings"}),Object(d.jsx)("span",{className:"material-icons-round ".concat(0!==r.length?"actions-icon":"hidden"),children:"fiber_manual_record"})]}),Object(d.jsx)("p",{children:Object(d.jsx)(p.c,{to:"".concat(n,"/ongoing"),activeStyle:{background:"black",color:"white",textDecoration:"none"},children:"Rented Items"})}),Object(d.jsxs)("p",{children:[Object(d.jsx)(p.c,{to:"".concat(n,"/completed"),activeStyle:{background:"black",color:"white",textDecoration:"none"},children:"Completed"}),Object(d.jsx)("span",{className:"material-icons-round ".concat(0!==h.length?"actions-icon":"hidden"),children:"fiber_manual_record"})]})]}),Object(d.jsxs)(b.d,{children:[Object(d.jsx)(b.b,{exact:!0,path:t,children:Object(d.jsx)(S,{})}),Object(d.jsx)(b.b,{path:"".concat(t,"/ongoing"),children:Object(d.jsx)(C,{})}),Object(d.jsx)(b.b,{path:"".concat(t,"/completed"),children:Object(d.jsx)(R,{})})]})]})}),q=(n(51),function(e){var t=e.listingId,n=document.cookie.split("=")[1],s=Object(c.useState)(null),a=Object(i.a)(s,2),r=a[0],o=a[1],m=Object(b.g)(),p=function(){var e=Object(u.a)(l.a.mark((function e(){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/listings/").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:c=e.sent,o(c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/listings/").concat(r._id),{method:"delete"});case 2:m.push("/deals");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(l.a.mark((function e(n){var c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),c=document.getElementById("updateListingForm"),s=new FormData(c),e.next=5,fetch("".concat(j,"/listings/").concat(t),{method:"POST",body:s});case 5:m.push("/deals");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){p()}),[]),r?Object(d.jsxs)("article",{className:"form-container",children:[Object(d.jsx)("button",{onClick:function(){m.go(-1)},className:"btn-close",children:Object(d.jsx)("span",{className:"material-icons-round close-icon",children:"close"})}),Object(d.jsx)("h2",{className:"header",children:"Update listing"}),Object(d.jsxs)("form",{onSubmit:h,className:"form-update",name:"updateListingForm",id:"updateListingForm",enctype:"multipart/form-data",children:[Object(d.jsx)("input",{type:"hidden",value:n,name:"ownerId"}),Object(d.jsx)("input",{type:"hidden",value:r.pictures[0],name:"currentimage"}),Object(d.jsxs)("label",{className:"semibold",children:["Listing title",Object(d.jsx)("br",{}),Object(d.jsx)("input",{className:"input-field",type:"text",name:"title",placeholder:"title",required:!0,value:r.title,onChange:function(e){return o(Object(w.a)(Object(w.a)({},r),{},{title:e.target.value}))}}),Object(d.jsx)("br",{})]}),Object(d.jsxs)("label",{className:"semibold",children:["Item description",Object(d.jsx)("br",{}),Object(d.jsx)("textArea",{className:"input-field",type:"text",name:"description",placeholder:"description",onChange:function(e){return o(Object(w.a)(Object(w.a)({},r),{},{description:e.target.value}))},required:!0,children:r.description}),Object(d.jsx)("br",{})]}),Object(d.jsxs)("label",{className:"semibold",children:["Price per day",Object(d.jsx)("br",{}),Object(d.jsx)("input",{className:"input-field",type:"number",name:"price",min:"1",max:"10000",placeholder:"price (SEK)",value:r.attributes.price,onChange:function(e){return o(Object(w.a)(Object(w.a)({},r),{},{attributes:Object(w.a)(Object(w.a)({},r.attributes),{},{price:e.target.value})}))},required:!0}),Object(d.jsx)("br",{})]}),Object(d.jsxs)("label",{className:"semibold",children:["Category",Object(d.jsx)("br",{}),Object(d.jsxs)("select",{className:"input-select",name:"category",value:r.attributes.category,onChange:function(e){return o(Object(w.a)(Object(w.a)({},r),{},{attributes:Object(w.a)(Object(w.a)({},r.attributes),{},{category:e.target.value})}))},children:[Object(d.jsx)("option",{value:"trousers",children:"Trousers"}),Object(d.jsx)("option",{value:"jeans",children:"Jeans"}),Object(d.jsx)("option",{value:"shirt",children:"Shirt"}),Object(d.jsx)("option",{value:"dress",children:"Dress"}),Object(d.jsx)("option",{value:"skirt",children:"Skirt"}),Object(d.jsx)("option",{value:"jacket",children:"Jacket"}),Object(d.jsx)("option",{value:"suit",children:"Suit"}),Object(d.jsx)("option",{value:"accessories",children:"Accessories"})]}),Object(d.jsx)("br",{})]}),Object(d.jsxs)("label",{className:"semibold",children:["Color",Object(d.jsx)("br",{}),Object(d.jsxs)("select",{className:"input-select",name:"color",value:r.attributes.color,onChange:function(e){return o(Object(w.a)(Object(w.a)({},r),{},{attributes:Object(w.a)(Object(w.a)({},r.attributes),{},{color:e.target.value})}))},children:[Object(d.jsx)("option",{value:"black",children:"Black"}),Object(d.jsx)("option",{value:"white",children:"White"}),Object(d.jsx)("option",{value:"red",children:"Red"}),Object(d.jsx)("option",{value:"blue",children:"Blue"}),Object(d.jsx)("option",{value:"orange",children:"Orange"}),Object(d.jsx)("option",{value:"green",children:"Green"}),Object(d.jsx)("option",{value:"pink",children:"Pink"}),Object(d.jsx)("option",{value:"purple",children:"Purple"}),Object(d.jsx)("option",{value:"grey",children:"Grey"}),Object(d.jsx)("option",{value:"brown",children:"Brown"}),Object(d.jsx)("option",{value:"mixed",children:"Mixed"}),Object(d.jsx)("option",{value:"yellow",children:"Yellow"})]}),Object(d.jsx)("br",{})]}),Object(d.jsxs)("label",{className:"semibold",children:["Size",Object(d.jsx)("br",{}),Object(d.jsxs)("select",{className:"input-select",name:"size",value:r.attributes.size,onChange:function(e){return o(Object(w.a)(Object(w.a)({},r),{},{attributes:Object(w.a)(Object(w.a)({},r.attributes),{},{size:e.target.value})}))},children:[Object(d.jsx)("option",{value:"xsmall",children:"XS"}),Object(d.jsx)("option",{value:"small",children:"S"}),Object(d.jsx)("option",{value:"medium",children:"M"}),Object(d.jsx)("option",{value:"large",children:"L"}),Object(d.jsx)("option",{value:"xlarge",children:"XL"}),Object(d.jsx)("br",{})]})]}),Object(d.jsxs)("label",{className:"semibold",children:["Gender",Object(d.jsx)("br",{}),Object(d.jsxs)("select",{className:"input-select",name:"gender",value:r.attributes.gender,onChange:function(e){return o(Object(w.a)(Object(w.a)({},r),{},{attributes:Object(w.a)(Object(w.a)({},r.attributes),{},{gender:e.target.value})}))},children:[Object(d.jsx)("option",{value:"guys",children:"Guys"}),Object(d.jsx)("option",{value:"ladies",children:"Ladies"}),Object(d.jsx)("option",{value:"unisex",children:"Unisex"})]}),Object(d.jsx)("br",{})]}),Object(d.jsxs)("div",{className:"form-update__preview",children:[Object(d.jsx)("img",{id:"preview-update",src:"".concat(j,"/uploads/").concat(r.pictures[0])}),Object(d.jsx)("p",{children:"No image"})]}),Object(d.jsxs)("label",{className:"semibold input-img",children:["Upload image ",Object(d.jsx)("span",{className:"material-icons-round icon-file-upload",children:"file_upload"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"file",name:"image",accept:"image/x-png,image/gif,image/jpeg",onChange:function(e){return function(e){var t=document.getElementById("preview-update");t.src=URL.createObjectURL(e.target.files[0]),t.onload=function(){return URL.revokeObjectURL(t.src)}}(e)},required:!0})]}),Object(d.jsx)("button",{className:"btn-submit semibold",type:"submit",children:"Update Listing"}),Object(d.jsx)("button",{className:"btn-delete semibold",onClick:O,children:"Delete Listing "})]})]}):Object(d.jsx)("div",{})}),D=function(e){var t=e.match;return Object(d.jsx)("div",{children:Object(d.jsx)(q,{listingId:t.params.listingid})})},T=(n(52),function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)([]),r=Object(i.a)(a,2),o=r[0],b=r[1],m=document.cookie.split("=")[1],O=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/bookings/owner/").concat(m)).then((function(e){return e.json()}));case 2:t=e.sent,n=t.filter((function(e){return!e.accepted})),s(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/bookings/completed/").concat(m)).then((function(e){return e.json()}));case 2:t=e.sent,n=t.filter((function(e){return m===e.ownerId&&!e.renterHasBeenReviewed||(m===e.renterId&&!e.ownerHasBeenReviewed||void 0)})),b(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){O(),h()}),[]),Object(d.jsx)("div",{className:"navbar",children:Object(d.jsxs)("ul",{className:"navbar__links",children:[Object(d.jsx)(p.b,{to:"/",style:{textDecoration:"none"},children:Object(d.jsxs)("div",{className:"link-container",children:[Object(d.jsx)("span",{className:"material-icons-round navbar-icon",children:"home"}),Object(d.jsx)("li",{className:"navbar-txt semibold",children:"Home"})]})}),Object(d.jsx)(p.b,{to:"/listing",style:{textDecoration:"none"},children:Object(d.jsxs)("div",{className:"link-container",children:[Object(d.jsx)("span",{className:"material-icons-round navbar-icon",children:"add"}),Object(d.jsx)("li",{className:"navbar-txt semibold",children:"List item"})]})}),Object(d.jsx)(p.b,{to:"/deals",style:{textDecoration:"none"},children:Object(d.jsxs)("div",{className:"link-container",children:[Object(d.jsx)("span",{className:"material-icons-round navbar-icon ".concat(0!==n.length||0!==o.length?"navbar-icon--actions":""),children:"local_offer"}),Object(d.jsx)("li",{className:"navbar-txt semibold",children:"Deals"})]})}),Object(d.jsx)(p.b,{to:"/account",style:{textDecoration:"none"},children:Object(d.jsxs)("div",{className:"link-container",children:[Object(d.jsx)("span",{className:"material-icons-round navbar-icon",children:"account_circle"}),Object(d.jsx)("li",{className:"navbar-txt semibold",children:"Account"})]})})]})})}),B=(n(53),function(){return Object(d.jsx)("div",{className:"logo-container",children:Object(d.jsx)("h1",{className:"logo",children:"Chameleon"})})}),P=(n(54),function(){var e=document.cookie.split("=")[1],t=Object(c.useState)(null),n=Object(i.a)(t,2),s=n[0],a=n[1],r=function(){var t=Object(u.a)(l.a.mark((function t(){var n,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(j,"/users/").concat(e));case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,a(c);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){r()}),[]),s?Object(d.jsxs)("article",{className:"account-info",children:[Object(d.jsx)("div",{className:"account-info__header",children:Object(d.jsx)("h2",{className:"account-info__header-txt",children:"Your account"})}),Object(d.jsxs)("div",{className:"flex-wrapper",children:[Object(d.jsxs)("div",{className:"flex-wrapper__left",children:[Object(d.jsx)("section",{className:"account-info__img",children:Object(d.jsx)("img",{src:"".concat(j).concat(s.user.picture)})}),Object(d.jsx)("br",{}),Object(d.jsxs)("p",{className:"semibold",children:["Rating: ",s.rating,"number"===typeof s.rating&&Object(d.jsx)("span",{class:"material-icons-round account-info__star",children:"star"})]})]}),Object(d.jsxs)("section",{className:"account-info__personal",children:[Object(d.jsxs)("h3",{children:[s.user.firstName," ",s.user.lastName]}),Object(d.jsx)("br",{}),Object(d.jsx)("p",{className:"semibold",children:"Location:"}),Object(d.jsx)("p",{children:s.user.location.street}),Object(d.jsxs)("p",{children:[s.user.location.postalcode,", ",s.user.location.area]}),Object(d.jsx)("p",{className:"semibold",children:"Username:"}),Object(d.jsx)("p",{children:s.user.username}),Object(d.jsx)("p",{className:"semibold",children:"Email:"}),Object(d.jsx)("p",{children:s.user.email}),Object(d.jsxs)("button",{className:"account-info__edit semibold",children:["Edit Details",Object(d.jsx)("span",{className:"material-icons-round",children:"edit"})]}),Object(d.jsxs)("button",{className:"account-info__logout semibold",children:["Log out",Object(d.jsx)("span",{className:"material-icons-round icon-logout",children:"logout"})]})]})]})]}):null}),U=(n(55),function(e){var t=e.rating;return Object(d.jsxs)("article",{className:"rating",children:[Object(d.jsx)("span",{class:"material-icons-round rating__star",children:t>=1?"star":"star_border"}),Object(d.jsx)("span",{class:"material-icons-round rating__star",children:t>=2?"star":"star_border"}),Object(d.jsx)("span",{class:"material-icons-round rating__star",children:t>=3?"star":"star_border"}),Object(d.jsx)("span",{class:"material-icons-round rating__star",children:t>=4?"star":"star_border"}),Object(d.jsx)("span",{class:"material-icons-round rating__star",children:t>=5?"star":"star_border"})]})}),z=(n(56),function(e){var t=e.review,n=Object(c.useState)(null),s=Object(i.a)(n,2),a=s[0],r=s[1],o=function(){var e=Object(u.a)(l.a.mark((function e(){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/users/").concat(t.authorId));case 2:return n=e.sent,e.next=5,n.json();case 5:c=e.sent,r(c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){o()}),[]),a?Object(d.jsxs)("div",{className:"review",children:[Object(d.jsxs)("p",{className:"review__rating semibold",children:[Object(d.jsx)(p.b,{to:"/user/".concat(a.user._id),children:a.user.firstName})," ",Object(d.jsx)(U,{rating:t.rating})]}),""!==t.feedback&&Object(d.jsxs)("p",{className:"review__feedback",children:['"',t.feedback,'"']}),Object(d.jsx)("p",{className:"review__date",children:t.date})]}):null}),A=(n(57),function(e){var t=e.userId,n=Object(c.useState)(null),s=Object(i.a)(n,2),a=s[0],r=s[1],o=Object(c.useState)(null),b=Object(i.a)(o,2),m=b[0],p=b[1],O=function(){var e=Object(u.a)(l.a.mark((function e(){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/reviews/").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:c=e.sent,r(c.reverse());case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(l.a.mark((function e(){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/users/").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:c=e.sent,p(c.user);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){O(),h()}),[]),a&&m?Object(d.jsxs)("article",{className:"review-feed",children:[Object(d.jsxs)("h3",{className:"review-feed__heading",children:[m.firstName,"'s reviews"]}),0===a.length&&Object(d.jsxs)("p",{className:"semibold",children:[m.firstName," has no reviews yet"]}),a.map((function(e){return Object(d.jsx)(z,{review:e},e._id)}))]}):null}),H=function(){var e=document.cookie.split("=")[1];return Object(d.jsxs)("section",{children:[Object(d.jsx)(P,{}),Object(d.jsx)(A,{userId:e})]})},J=(n(58),function(e){var t=e.match,n=Object(b.g)(),s=Object(c.useState)(null),a=Object(i.a)(s,2),r=a[0],o=a[1],m=function(){var e=Object(u.a)(l.a.mark((function e(){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/users/").concat(t.params.userId));case 2:return n=e.sent,e.next=5,n.json();case 5:c=e.sent,o(c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){m()}),[]),r?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("article",{className:"user-info",children:[Object(d.jsx)("button",{className:"btn-close btn-back-user",onClick:function(){n.go(-1)},children:Object(d.jsx)("span",{className:"material-icons-round close-icon",children:"close"})}),Object(d.jsxs)("h2",{className:"user-info__name",children:[r.user.firstName," ",r.user.lastName]}),Object(d.jsxs)("div",{className:"flex-wrapper",children:[Object(d.jsx)("section",{className:"user-info__img",children:Object(d.jsx)("img",{src:"".concat(j).concat(r.user.picture)})}),Object(d.jsxs)("section",{className:"user-info__info",children:[Object(d.jsxs)("h3",{className:"user-info__rating",children:["Rating: ",r.rating,"number"===typeof r.rating&&Object(d.jsx)("span",{class:"material-icons-round user-info__star",children:"star"})]}),Object(d.jsx)("p",{className:"semibold",children:"Location:"}),Object(d.jsx)("p",{children:r.user.location.area})]})]})]}),Object(d.jsx)(A,{userId:t.params.userId})]}):null});var Y=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],s=t[1];return Object(b.g)(),Object(c.useEffect)((function(){document.cookie&&/userId/i.test(document.cookie)&&s(!0)}),[]),n?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(B,{}),Object(d.jsxs)(b.d,{children:[Object(d.jsx)(b.b,{path:"/",exact:!0,component:f}),Object(d.jsx)(b.b,{path:"/booking/:listingId",component:_}),Object(d.jsx)(b.b,{path:"/listing",component:g}),Object(d.jsx)(b.b,{path:"/deals",component:F}),Object(d.jsx)(b.b,{path:"/updatelisting/:listingid",component:D}),Object(d.jsx)(b.b,{path:"/account",component:H}),Object(d.jsx)(b.b,{path:"/user/:userId",exact:!0,component:J})]}),Object(d.jsx)(T,{})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(B,{}),Object(d.jsx)(m,{setHasCookie:s})]})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,60)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))};r.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(p.a,{basename:"/chameleon-client",children:Object(d.jsx)(Y,{})})}),document.getElementById("root")),G()}]),[[59,1,2]]]);
//# sourceMappingURL=main.8e0dccf6.chunk.js.map